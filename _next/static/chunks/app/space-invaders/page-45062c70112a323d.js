(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[433],{9257:function(e,t,r){Promise.resolve().then(r.bind(r,7208))},7208:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return d}});var n,i,s,o,l=r(7437),a=r(2265),c=r(961),u=r(1223),f=r(3871);let m=(e,t)=>.5>Math.abs(e-t),p=(e,t)=>(console.log(e,t),m(e.x,t.x)&&m(e.y,t.y));function h(e){let{collision:t,player:r,enemies:n,setCollision:i}=e,[s,o]=(0,u.Z)(),[c,m]=(0,a.useState)("royalblue");return(0,f.F)(e=>{let{clock:s}=e;if(n.filter(e=>e).forEach(e=>{p(r.current.position,e)&&(i(!0),m("black"))}),!t){"royalblue"!==c&&m("royalBlue");let{forward:e,back:t,left:n,right:i}=o(),l=r.current.position.x,a=r.current.position.y;r.current.rotation.x=s.getElapsedTime(),r.current.position.setY(e?a+.035:t?a-.035:a),r.current.position.setX(n?l-.035:i?l+.035:l)}}),(0,l.jsxs)("mesh",{ref:r,scale:[.3,.3,.3],children:[(0,l.jsx)("boxGeometry",{}),(0,l.jsx)("meshBasicMaterial",{color:c})]})}function x(e){let{idx:t,collision:r,enemies:n,setEnemies:i}=e;return(0,f.F)(e=>{let{clock:s}=e;if(n[t]){if(n[t].y<-3)i(e=>e.map((e,r)=>t!==r&&e));else{let e=n[t].y,o={y:r?e:e-.05};i(e=>e.map((e,r)=>t===r?{...e,...o,rotation:[0,s.getElapsedTime(),0]}:e))}}}),(0,l.jsxs)("mesh",{position:[n[t].x,n[t].y,0],scale:n[t].scale,rotation:n[t].rotation,children:[(0,l.jsx)("boxGeometry",{}),(0,l.jsx)("meshBasicMaterial",{color:"hotpink"})]})}function y(e){let{collision:t,enemies:r,setEnemies:n}=e,i=(0,a.useRef)(0);return(0,f.F)(e=>{let{clock:s}=e;if(t)return;let o=s.getElapsedTime();if(o-i.current>.4){i.current=o;let e=r.indexOf(null);-1!==e&&n(t=>t.map((t,r)=>{if(r===e){let e=Math.floor(5*Math.random());return{y:3,x:Math.random()?e:-e,scale:.3}}return t}))}}),(0,l.jsx)(l.Fragment,{children:r.map((e,i)=>e&&(0,l.jsx)(x,{collision:t,idx:i,enemies:r,setEnemies:n},i))})}function d(){let e=(0,a.useRef)(null),[t,r]=(0,a.useState)(Array(25).fill(null)),[n,i]=(0,a.useState)(!1),s=(0,a.useMemo)(()=>[{name:"forward",keys:["ArrowUp","KeyW"]},{name:"back",keys:["ArrowDown","KeyS"]},{name:"left",keys:["ArrowLeft","KeyA"]},{name:"right",keys:["ArrowRight","KeyD"]},{name:"jump",keys:["Space"]}],[]);return(0,l.jsx)(u.c,{map:s,children:(0,l.jsxs)("div",{className:"w-screen max-w-[1100px] h-[500px] max-h-screen",children:[(0,l.jsxs)(c.Xz,{children:[(0,l.jsx)(y,{collision:n,enemies:t,setEnemies:r}),(0,l.jsx)("directionalLight",{position:[0,0,2]}),(0,l.jsx)(h,{collision:n,player:e,enemies:t,setCollision:i})]}),(0,l.jsx)("button",{onClick:t=>{t.preventDefault(),e.current.position.setX(0),e.current.position.setY(0),r(Array(25).fill(null)),i(!1)},children:"Start"})]})})}(n=s||(s={})).forward="forward",n.back="back",n.left="left",n.right="right",n.jump="jump",(i=o||(o={})).forward="forward",i.back="back",i.left="left",i.right="right",i.jump="jump"}},function(e){e.O(0,[689,870,771,971,117,744],function(){return e(e.s=9257)}),_N_E=e.O()}]);