(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[433],{9257:function(e,t,r){Promise.resolve().then(r.bind(r,7208))},7208:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return j}});var n,i,o,s,l=r(7437),a=r(2265),c=r(961),u=r(1223),f=r(992);let m=(e,t)=>.5>Math.abs(e-t),h=(e,t)=>(console.log(e,t),m(e.x,t.x)&&m(e.y,t.y));function p(e){let{collision:t,player:r,enemies:n,setCollision:i}=e,[o,s]=(0,u.Z)(),[c,m]=(0,a.useState)("royalblue");return(0,f.F)(e=>{let{clock:o}=e;if(n.filter(e=>e).forEach(e=>{h(r.current.position,e)&&(i(!0),m("black"))}),!t){"royalblue"!==c&&m("royalBlue");let{forward:e,back:t,left:n,right:i}=s(),l=r.current.position.x,a=r.current.position.y;r.current.rotation.x=o.getElapsedTime(),r.current.position.setY(e?a+.039:t?a-.039:a),r.current.position.setX(n?l-.039:i?l+.039:l)}}),(0,l.jsxs)("mesh",{ref:r,scale:[.3,.3,.3],children:[(0,l.jsx)("boxGeometry",{}),(0,l.jsx)("meshBasicMaterial",{color:c})]})}function x(e){let{idx:t,collision:r,enemies:n,setEnemies:i}=e;return(0,f.F)(e=>{let{clock:o}=e;if(n[t]){let e=n[t].y;if(e<-3)i(e=>e.map((e,r)=>t===r?null:e));else{let n={y:r?e:e-.05};i(e=>e.map((e,r)=>t===r?{...e,...n,rotation:[0,o.getElapsedTime(),0]}:e))}}}),(0,l.jsxs)("mesh",{position:[n[t].x,n[t].y,0],scale:n[t].scale,rotation:n[t].rotation,children:[(0,l.jsx)("boxGeometry",{}),(0,l.jsx)("meshBasicMaterial",{color:"hotpink"})]})}function d(e){let{collision:t,enemies:r,setEnemies:n}=e,i=(0,a.useRef)(0);return(0,f.F)(e=>{let{clock:o}=e;if(t)return;let s=o.getElapsedTime();if(s-i.current>.4){i.current=s;let e=r.indexOf(null);-1!==e&&n(t=>t.map((t,r)=>{if(r===e){let e=Math.floor(5*Math.random());return{y:3,x:Math.random()?e:-e,scale:.3}}return t}))}}),(0,l.jsx)(l.Fragment,{children:r.map((e,i)=>e&&(0,l.jsx)(x,{collision:t,idx:i,enemies:r,setEnemies:n},i))})}(n=o||(o={})).forward="forward",n.back="back",n.left="left",n.right="right",n.jump="jump";var y=r(281);function j(){let e=(0,a.useRef)(null),[t,r]=(0,a.useState)(Array(25).fill(null)),[n,i]=(0,a.useState)(!1),o=(0,a.useMemo)(()=>[{name:"forward",keys:["ArrowUp","KeyW"]},{name:"back",keys:["ArrowDown","KeyS"]},{name:"left",keys:["ArrowLeft","KeyA"]},{name:"right",keys:["ArrowRight","KeyD"]},{name:"jump",keys:["Space"]}],[]);return(0,l.jsx)(u.c,{map:o,children:(0,l.jsx)("div",{className:"w-screen max-w-[1100px] h-[90vh] max-h-screen",children:(0,l.jsxs)(c.Xz,{children:[(0,l.jsx)(d,{collision:n,enemies:t,setEnemies:r}),(0,l.jsx)("directionalLight",{position:[0,0,2]}),(0,l.jsx)(p,{collision:n,player:e,enemies:t,setCollision:i}),(0,l.jsxs)(y.x,{position:[-6,-3.6,0],fontSize:.5,color:"white",anchorX:"left",anchorY:"bottom",onClick:()=>{e.current.position.setX(0),e.current.position.setY(0),r(Array(25).fill(null)),i(!1)},children:["Start",(0,l.jsx)("meshNormalMaterial",{})]})]})})})}(i=s||(s={})).forward="forward",i.back="back",i.left="left",i.right="right",i.jump="jump"}},function(e){e.O(0,[689,870,918,958,971,117,744],function(){return e(e.s=9257)}),_N_E=e.O()}]);